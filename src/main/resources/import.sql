DROP TABLE IF EXISTS PRICE_SCHEMA;
CREATE TABLE PRICE_SCHEMA(ID INT IDENTITY PRIMARY KEY, HIGH_FROM TIME NOT NULL, HIGH_UNTIL TIME NOT NULL);
INSERT INTO PRICE_SCHEMA(HIGH_FROM, HIGH_UNTIL) VALUES ('7:00:00', '18:59:59');

DROP TABLE IF EXISTS PRICE;
CREATE TABLE PRICE(ID INT IDENTITY PRIMARY KEY, HIGH_PRICE DOUBLE NOT NULL, LOW_PRICE DOUBLE NOT NULL);
INSERT INTO PRICE(HIGH_PRICE, LOW_PRICE) VALUES (1.50, 1.00);
INSERT INTO PRICE(HIGH_PRICE, LOW_PRICE) VALUES (1.00, 0.75);

DROP TABLE IF EXISTS CLIENT_TYPE;
CREATE TABLE CLIENT_TYPE(ID INT IDENTITY PRIMARY KEY, NAME VARCHAR(255) NOT NULL, MONTHLY_FEE DOUBLE, MAX_FEE DOUBLE, PRICE INT NOT NULL);
ALTER TABLE CLIENT_TYPE ADD FOREIGN KEY (PRICE) REFERENCES PRICE(ID);
INSERT INTO CLIENT_TYPE(NAME, MONTHLY_FEE, MAX_FEE, PRICE) VALUES ('Regular', 0, NULL, 1);
INSERT INTO CLIENT_TYPE(NAME, MONTHLY_FEE, MAX_FEE, PRICE) VALUES ('Premium', 20, 300, 2);

DROP TABLE IF EXISTS CLIENT;
CREATE TABLE CLIENT(ID INT IDENTITY PRIMARY KEY, CLIENT_TYPE INT NOT NULL, NAME VARCHAR(255) NOT NULL);
ALTER TABLE CLIENT ADD FOREIGN KEY (CLIENT_TYPE) REFERENCES CLIENT_TYPE(ID);
INSERT INTO CLIENT(CLIENT_TYPE, NAME) VALUES (1, 'Peter Dinklage');
INSERT INTO CLIENT(CLIENT_TYPE, NAME) VALUES (2, 'Lena Headey');
INSERT INTO CLIENT(CLIENT_TYPE, NAME) VALUES (1, 'Emilia Clarke');
INSERT INTO CLIENT(CLIENT_TYPE, NAME) VALUES (2, 'Kit Harington');

DROP TABLE IF EXISTS PARKING_HOUSE;
CREATE TABLE PARKING_HOUSE(ID INT IDENTITY PRIMARY KEY, NAME VARCHAR(255) NOT NULL, ADDRESS VARCHAR(255) NOT NULL, PRICE_SCHEMA INT NOT NULL);
ALTER TABLE PARKING_HOUSE ADD FOREIGN KEY (PRICE_SCHEMA) REFERENCES PRICE_SCHEMA(ID);
INSERT INTO PARKING_HOUSE(NAME, ADDRESS, PRICE_SCHEMA) VALUES ('Main Parking House', 'Main Road 123', 1);

DROP TABLE IF EXISTS INVOICE;
CREATE TABLE INVOICE(ID INT IDENTITY PRIMARY KEY, CLIENT INT NOT NULL, CREATED DATE NOT NULL, REFERENCE VARCHAR(255) NOT NULL, MONTHLY_FEE DOUBLE, MAX_FEE DOUBLE, TOTAL DOUBLE NOT NULL);
ALTER TABLE INVOICE ADD FOREIGN KEY (CLIENT) REFERENCES CLIENT(ID);

DROP TABLE IF EXISTS PARKING;
CREATE TABLE PARKING(ID INT IDENTITY PRIMARY KEY, CLIENT INT NOT NULL, PARKING_HOUSE INT NOT NULL, START_TIME TIMESTAMP NOT NULL, END_TIME TIMESTAMP NOT NULL, FEE INT, INVOICE INT);
ALTER TABLE PARKING ADD FOREIGN KEY (PARKING_HOUSE) REFERENCES PARKING_HOUSE(ID);
ALTER TABLE PARKING ADD FOREIGN KEY (CLIENT) REFERENCES CLIENT(ID);
ALTER TABLE PARKING ADD FOREIGN KEY (INVOICE) REFERENCES INVOICE(ID);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (1, 1, '2016-08-04 09:15:39', '2016-08-04 12:22:13', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (1, 1, '2016-08-05 09:01:11', '2016-08-05 18:15:14', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (1, 1, '2016-08-07 11:45:06', '2016-08-07 15:15:15', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (1, 1, '2016-08-15 08:08:00', '2016-08-15 11:53:57', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (1, 1, '2016-08-18 07:55:19', '2016-08-18 16:33:30', NULL, NULL);

INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-02 09:15:00', '2016-08-02 14:22:01', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-04 08:15:00', '2016-08-04 16:01:38', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-05 07:45:30', '2016-08-07 17:17:22', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-15 09:15:39', '2016-08-15 13:55:43', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-19 09:15:39', '2016-08-20 18:18:18', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (2, 1, '2016-08-22 09:15:39', '2016-08-22 12:22:33', NULL, NULL);

INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-01 09:01:39', '2016-08-01 19:02:09', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-06 09:02:39', '2016-08-06 19:15:30', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-08 09:05:39', '2016-08-09 18:45:22', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-10 09:11:39', '2016-08-11 18:59:09', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-12 09:03:39', '2016-08-12 19:05:00', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-13 09:16:39', '2016-08-16 19:15:08', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (3, 1, '2016-08-19 09:06:39', '2016-08-19 19:01:46', NULL, NULL);

INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-04 20:15:15', '2016-08-05 07:15:02', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-05 21:02:39', '2016-08-06 07:55:18', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-06 18:35:30', '2016-08-07 08:15:37', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-07 19:55:39', '2016-08-10 09:01:28', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-12 20:25:35', '2016-08-13 07:55:13', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-13 20:00:30', '2016-08-15 06:45:18', NULL, NULL);
INSERT INTO PARKING(CLIENT, PARKING_HOUSE, START_TIME, END_TIME, FEE, INVOICE) VALUES (4, 1, '2016-08-17 20:40:30', '2016-08-21 06:06:06', NULL, NULL);
